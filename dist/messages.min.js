!function(a){"use strict";function b(a,b){this.element=a,this.options=b;var e=d.default_classes.split(" ");return this.options.hasOwnProperty("classes")?(this.options.classes=this.options.classes.split(" "),this.options.classes=this.options.classes.concat(e)):this.options.classes=e,this._defaults=d,this._name=c,this.clean=this.options.clean===!0||this.options.clean===!1?this.options.clean:!0,this.slideIn=this.options.slideIn===!0||this.options.slideIn===!1?this.options.slideIn:!1,this.buildMessage()&&(this.cleanMessage(),this.insertMessage()),this}var c="Message",d={default_classes:"alert"};a.fn.message=function(c){return this.each(function(){var d=a(this),e=d.data("jq.messages"),f="object"==typeof c&&c;e||(e=[]),f&&(e.push(new b(d,f)),d.data("jq.messages",e)),"string"==typeof c&&a.each(e,function(a,b){b[c]()})})},b.prototype.close=function(){a(this._message_).remove()},b.prototype.buildMessage=function(){var b=a(this.element).data(this.options.message_attribute),c=a(document.body).data(this.options.message_attribute),d=a(document.body).data(this.options.fallback_message_attribute);return this.message_details=this.options.message_attribute&&b?b:this.options.message?this.options.message:this.options.message_attribute&&c?c:this.options.fallback_message_attribute&&d?d:{message:this.options.default_message},this.message_details.constructor===String&&(this.message_details={message:this.message_details}),void 0!==this.message_details.message},b.prototype.cleanMessage=function(){if(this.clean){var b=this.element;a.each(this.options.classes,function(c,d){this.slideIn?a(b).find("."+d).slideUp(200,function(){a(this).remove()}):a(b).find("."+d).remove()})}},b.prototype.printableClasses=function(){return this.options.classes.join(" ")},b.prototype.insertMessage=function(){var b=this.printableClasses(),c=a("<div>").attr("class","alert "+b);this.message_details.hasOwnProperty("message")?c.html(this.message_details.message):c.html(this.message_details),this._message_=c;var d=null;if(this.message_details.field_name){var e='[name="'+this.message_details.field_name+'"]';return d=a(this.element).find(e),c.attr("class","fieldError alert "+b).hide(),d.parent().append(c),this.slideIn?c.slideDown(200):c.show(),void 0}return this.options.attach_to?(d=a(this.element).find(this.options.attach_to),c.attr("class","fieldError "+b).hide(),d.after(c),this.slideIn?c.slideDown(200):c.show(),void 0):(a(this.element).prepend(c.hide()),this.slideIn?c.slideDown(200):c.show(),void 0)}}(jQuery);