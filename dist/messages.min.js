/*! Messages - v0.1.0 - 2013-09-19
* https://github.com/yola/jquery-messages
* Copyright (c) 2013 kahnjw; Licensed MIT */
!function(a){function b(b,e){this.element=b,this.options=a.extend({},d,e),this._defaults=d,this._name=c,this.buildMessage()&&(this.cleanMessages(),this.insertMessage())}var c="Messages",d={alert_classes:{info:"alert-info",loading:"alert-info loading",error:"alert-error alert-danger",success:"alert-success",alert:"alert"}};a.fn.displayMessage=function(d){return this.each(function(){a.data(this,"plugin_"+c,new b(this,d))})},b.prototype.buildMessage=function(){var b=a(this.element).data(this.options.message_attribute),c=a(document.body).data(this.options.message_attribute),d=a(document.body).data(this.options.fallback_message_attribute);return this.message_details=this.options.message_attribute&&b?b:this.options.message?this.options.message:this.options.message_attribute&&c?c:this.options.fallback_message_attribute&&d?d:{message:this.options.default_message},this.message_details.constructor===String&&(this.message_details={message:this.message_details}),void 0!==this.message_details.message},b.prototype.cleanMessages=function(){var b=null;if(b=this.options.clean===!0||this.options.clean===!1?this.options.clean:!0){var c=this.element;a.each(this.options.alert_classes,function(b,d){a(c).find("."+d).slideUp(200,function(){a(this).remove()})})}},b.prototype.findStyleClass=function(){var b=this.options,c="";return a.each(this.options.alert_classes,function(a,d){b.message_type===a&&(c=d)}),c},b.prototype.insertMessage=function(){var b=this.findStyleClass(),c=a("<div>").attr("class","alert "+b);this.message_details.hasOwnProperty("message")?c.html(this.message_details.message):c.html(this.message_details);var d=null;if(this.message_details.field_name){var e='[name="'+this.message_details.field_name+'"]';return d=a(this.element).find(e),c.attr("class","fieldError alert "+b).hide(),d.parent().append(c),c.slideDown(200),void 0}return this.options.attach_to?(d=a(this.element).find(this.options.attach_to),c.attr("class","fieldError alert "+b).hide(),d.after(c),c.slideDown(200),void 0):(a(this.element).prepend(c.hide()),c.slideDown(200),void 0)}}(jQuery);